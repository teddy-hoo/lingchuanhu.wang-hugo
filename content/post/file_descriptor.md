---
title: "文件描述符"
date: 2018-04-01T13:02:05+08:00
draft: false
---

Linux将所有的I/O设备，如网络、磁盘、终端，都被模型化为文件，而所有的输入和输出都被当做对相应的文件的读和写来执行。

对于这些文件有统一的方式来操作：

#### 打开文件
一个应用通过系统调用打开相应的文件，内核会返回一个非负整数，叫做**文件描述符**，内核会记录打开文件的信息，而应用程序只需记住这个描述符。
几个常用的文件描述符
0: stdin
1: stdout
2: stderr

#### 改变当前的文件位置
文件打开之后，内核会保留一个文件位置k，为从文件开始的字节偏移量

#### 读写文件
即从k位置开始读或者写文件

#### 关闭文件
进程通过系统调用通知内核关闭文件，内核释放文件相关的数据结构，并将这个文件描述符恢复到可用状态池中。另外，当进程以何种原因终止时，内核都会关闭所有打开的文件并释放它们的存储器资源


